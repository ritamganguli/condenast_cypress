// plugin/index.ts
import fs from "fs";
import { format } from "util";
async function cloudPlugin(_on, config) {
  function debug(...args) {
    if (config.env.currents_debug_enabled) {
      console.debug("[currents:plugin]", format(...args));
    }
  }
  debug("currents plugin loaded");
  if (config.env.currents_temp_file) {
    debug("dumping config to '%s'", config.env.currents_temp_file);
    fs.writeFileSync(config.env.currents_temp_file, JSON.stringify(config));
    debug("config is availabe at '%s'", config.env.currents_temp_file);
  }
  return config;
}
var plugin_default = cloudPlugin;
export {
  cloudPlugin,
  plugin_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vcGx1Z2luL2luZGV4LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cIkN5cHJlc3NcIiAvPlxuXG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tIFwidXRpbFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvdWRQbHVnaW4oXG4gIF9vbjogQ3lwcmVzcy5QbHVnaW5FdmVudHMsXG4gIGNvbmZpZzogQ3lwcmVzcy5QbHVnaW5Db25maWdPcHRpb25zXG4pIHtcbiAgZnVuY3Rpb24gZGVidWcoLi4uYXJnczogdW5rbm93bltdKSB7XG4gICAgaWYgKGNvbmZpZy5lbnYuY3VycmVudHNfZGVidWdfZW5hYmxlZCkge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcIltjdXJyZW50czpwbHVnaW5dXCIsIGZvcm1hdCguLi5hcmdzKSk7XG4gICAgfVxuICB9XG5cbiAgZGVidWcoXCJjdXJyZW50cyBwbHVnaW4gbG9hZGVkXCIpO1xuXG4gIGlmIChjb25maWcuZW52LmN1cnJlbnRzX3RlbXBfZmlsZSkge1xuICAgIGRlYnVnKFwiZHVtcGluZyBjb25maWcgdG8gJyVzJ1wiLCBjb25maWcuZW52LmN1cnJlbnRzX3RlbXBfZmlsZSk7XG4gICAgZnMud3JpdGVGaWxlU3luYyhjb25maWcuZW52LmN1cnJlbnRzX3RlbXBfZmlsZSwgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XG4gICAgZGVidWcoXCJjb25maWcgaXMgYXZhaWxhYmUgYXQgJyVzJ1wiLCBjb25maWcuZW52LmN1cnJlbnRzX3RlbXBfZmlsZSk7XG4gIH1cblxuICByZXR1cm4gY29uZmlnO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbG91ZFBsdWdpbjtcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFFQSxPQUFPLFFBQVE7QUFDZixTQUFTLGNBQWM7QUFFdkIsZUFBc0IsWUFDcEIsS0FDQSxRQUNBO0FBQ0EsV0FBUyxTQUFTLE1BQWlCO0FBQ2pDLFFBQUksT0FBTyxJQUFJLHdCQUF3QjtBQUNyQyxjQUFRLE1BQU0scUJBQXFCLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFBQSxJQUNwRDtBQUFBLEVBQ0Y7QUFFQSxRQUFNLHdCQUF3QjtBQUU5QixNQUFJLE9BQU8sSUFBSSxvQkFBb0I7QUFDakMsVUFBTSwwQkFBMEIsT0FBTyxJQUFJLGtCQUFrQjtBQUM3RCxPQUFHLGNBQWMsT0FBTyxJQUFJLG9CQUFvQixLQUFLLFVBQVUsTUFBTSxDQUFDO0FBQ3RFLFVBQU0sOEJBQThCLE9BQU8sSUFBSSxrQkFBa0I7QUFBQSxFQUNuRTtBQUVBLFNBQU87QUFDVDtBQUVBLElBQU8saUJBQVE7IiwKICAibmFtZXMiOiBbXQp9Cg==